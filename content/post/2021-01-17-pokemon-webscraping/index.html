---
title: ポケモンデータをウェブスクレイピング
author: Rikiya Honda
date: '2021-01-17'
slug: pokemon-webscraping
categories:
  - blog
tags:
  - rvest
description: ''
thumbnail: ''
---

<script src="index_files/htmlwidgets/htmlwidgets.js"></script>
<script src="index_files/jquery/jquery.min.js"></script>
<link href="index_files/datatables-css/datatables-crosstalk.css" rel="stylesheet" />
<script src="index_files/datatables-binding/datatables.js"></script>
<link href="index_files/dt-core/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="index_files/dt-core/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="index_files/dt-core/js/jquery.dataTables.min.js"></script>
<link href="index_files/crosstalk/css/crosstalk.css" rel="stylesheet" />
<script src="index_files/crosstalk/js/crosstalk.min.js"></script>


<p>こんにちは！</p>
<p>今回は、ポケモン386種を簡単にウェブスクレイピングできたので、その方法をメモしておこうと思います！</p>
<p>全行程は、全部で4つです。</p>
<ul>
<li>データを取得（ポケモン名と能力データは別</li>
<li>データを整える</li>
<li>データを保存</li>
<li>データを可視化</li>
</ul>
<p>では、見ていきましょう！</p>
<div id="環境" class="section level2">
<h2>環境</h2>
<pre class="r"><code>version</code></pre>
<pre><code>##                _                           
## platform       x86_64-w64-mingw32          
## arch           x86_64                      
## os             mingw32                     
## system         x86_64, mingw32             
## status                                     
## major          4                           
## minor          0.3                         
## year           2020                        
## month          10                          
## day            10                          
## svn rev        79318                       
## language       R                           
## version.string R version 4.0.3 (2020-10-10)
## nickname       Bunny-Wunnies Freak Out</code></pre>
</div>
<div id="パッケージ" class="section level2">
<h2>パッケージ</h2>
<pre class="r"><code>library(rvest)</code></pre>
<pre><code>FALSE  要求されたパッケージ xml2 をロード中です</code></pre>
<pre class="r"><code>library(tidyverse)</code></pre>
<pre><code>FALSE -- Attaching packages --------------------------------------- tidyverse 1.3.0 --</code></pre>
<pre><code>FALSE √ ggplot2 3.3.3     √ purrr   0.3.4
FALSE √ tibble  3.0.4     √ dplyr   1.0.2
FALSE √ tidyr   1.1.2     √ stringr 1.4.0
FALSE √ readr   1.4.0     √ forcats 0.5.0</code></pre>
<pre><code>FALSE -- Conflicts ------------------------------------------ tidyverse_conflicts() --
FALSE x dplyr::filter()         masks stats::filter()
FALSE x readr::guess_encoding() masks rvest::guess_encoding()
FALSE x dplyr::lag()            masks stats::lag()
FALSE x purrr::pluck()          masks rvest::pluck()</code></pre>
<pre class="r"><code>library(stringr)
library(DT)</code></pre>
</div>
<div id="データを取得" class="section level2">
<h2>データを取得</h2>
<div id="ポケモン名データを取ってくる" class="section level3">
<h3>ポケモン名データを取ってくる</h3>
<pre class="r"><code>name_all &lt;- &quot;&quot;
for (i in 1:386) {
  url_all &lt;- paste0(&quot;https://yakkun.com/data/zukan/n&quot;, i, &quot;.htm&quot;)
  data_all &lt;- read_html(url_all)
  media_all &lt;- html_nodes(data_all, &quot;#contents div:nth-child(3) table:nth-child(1) tr:nth-child(1) th&quot;) %&gt;% 
    html_text()
  name_all &lt;- c(name_all, media_all)
}</code></pre>
<div id="確認" class="section level4">
<h4>確認</h4>
</div>
</div>
<div id="能力値データを取ってくる" class="section level3">
<h3>能力値データを取ってくる</h3>
<pre class="r"><code>ability_all &lt;- data.frame()
for (i in 1:386) {
  url_all &lt;- paste0(&quot;https://yakkun.com/data/zukan/n&quot;, i, &quot;.htm&quot;)
  data_all &lt;- read_html(url_all)
  media_all &lt;- html_nodes(data_all, &quot;.center tr td.left&quot;) %&gt;% 
    html_text() 
  ability_all &lt;- rbind(ability_all, media_all)
}</code></pre>
</div>
</div>
<div id="データを整える" class="section level2">
<h2>データを整える</h2>
<pre class="r"><code># name と　abilityを融合
pokemon_df &lt;- cbind(name = name_all, ability_all)

# tidy data

pokemon_df2 &lt;- pokemon_df[ ,c(1:7, 19:20)] 


for (i in 2:7) {
  pokemon_df2[,i] &lt;- str_remove(pokemon_df[,i], pattern = &quot;\\((.*?)\\)&quot;) %&gt;% str_squish()
}

pokemon_df2[,8] &lt;- str_replace_all(pokemon_df2[,8], pattern = &quot;歩&quot;, replacement = &quot;&quot;)


pokemon_df2[,2:8] &lt;- as.double(pokemon_df2[2:8])

for (i in 2:8) {
  pokemon_df2[,i] &lt;- as.double(pokemon_df2[,i])
}</code></pre>
</div>
<div id="データを保存" class="section level2">
<h2>データを保存</h2>
<pre class="r"><code>saveRDS(pokemon_df2, &quot;pokemon_df.RData&quot;)</code></pre>
</div>
<div id="データを確認" class="section level2">
<h2>データを確認</h2>
<p>何だがごつい名前のポケモンが上位に来てますね～
例えば、「こうげき」の欄で見てみると、「ケッキング」やら、「レックウザ」といったものが上位に来てます。</p>
<pre class="r"><code>pokemon_df &lt;- readRDS(&quot;pokemon_df.RData&quot;)
datatable(pokemon_df)</code></pre>
<div id="htmlwidget-1" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-1">{"x":{"filter":"none","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","256","257","258","259","260","261","262","263","264","265","266","267","268","269","270","271","272","273","274","275","276","277","278","279","280","281","282","283","284","285","286","287","288","289","290","291","292","293","294","295","296","297","298","299","300","301","302","303","304","305","306","307","308","309","310","311","312","313","314","315","316","317","318","319","320","321","322","323","324","325","326","327","328","329","330","331","332","333","334","335","336","337","338","339","340","341","342","343","344","345","346","347","348","349","350","351","352","353","354","355","356","357","358","359","360","361","362","363","364","365","366","367","368","369","370","371","372","373","374","375","376","377","378","379","380","381","382","383","384","385","386"],["フシギダネ","フシギソウ","フシギバナ","ヒトカゲ","リザード","リザードン","ゼニガメ","カメール","カメックス","キャタピー","トランセル","バタフリー","ビードル","コクーン","スピアー","ポッポ","ピジョン","ピジョット","コラッタ","ラッタ","オニスズメ","オニドリル","アーボ","アーボック","ピカチュウ","ライチュウ","サンド","サンドパン","ニドラン♀","ニドリーナ","ニドクイン","ニドラン♂","ニドリーノ","ニドキング","ピッピ","ピクシー","ロコン","キュウコン","プリン","プクリン","ズバット","ゴルバット","ナゾノクサ","クサイハナ","ラフレシア","パラス","パラセクト","コンパン","モルフォン","ディグダ","ダグトリオ","ニャース","ペルシアン","コダック","ゴルダック","マンキー","オコリザル","ガーディ","ウインディ","ニョロモ","ニョロゾ","ニョロボン","ケーシィ","ユンゲラー","フーディン","ワンリキー","ゴーリキー","カイリキー","マダツボミ","ウツドン","ウツボット","メノクラゲ","ドククラゲ","イシツブテ","ゴローン","ゴローニャ","ポニータ","ギャロップ","ヤドン","ヤドラン","コイル","レアコイル","カモネギ","ドードー","ドードリオ","パウワウ","ジュゴン","ベトベター","ベトベトン","シェルダー","パルシェン","ゴース","ゴースト","ゲンガー","イワーク","スリープ","スリーパー","クラブ","キングラー","ビリリダマ","マルマイン","タマタマ","ナッシー","カラカラ","ガラガラ","サワムラー","エビワラー","ベロリンガ","ドガース","マタドガス","サイホーン","サイドン","ラッキー","モンジャラ","ガルーラ","タッツー","シードラ","トサキント","アズマオウ","ヒトデマン","スターミー","バリヤード","ストライク","ルージュラ","エレブー","ブーバー","カイロス","ケンタロス","コイキング","ギャラドス","ラプラス","メタモン","イーブイ","シャワーズ","サンダース","ブースター","ポリゴン","オムナイト","オムスター","カブト","カブトプス","プテラ","カビゴン","フリーザー","サンダー","ファイヤー","ミニリュウ","ハクリュー","カイリュー","ミュウツー","ミュウ","チコリータ","ベイリーフ","メガニウム","ヒノアラシ","マグマラシ","バクフーン","ワニノコ","アリゲイツ","オーダイル","オタチ","オオタチ","ホーホー","ヨルノズク","レディバ","レディアン","イトマル","アリアドス","クロバット","チョンチー","ランターン","ピチュー","ピィ","ププリン","トゲピー","トゲチック","ネイティ","ネイティオ","メリープ","モココ","デンリュウ","キレイハナ","マリル","マリルリ","ウソッキー","ニョロトノ","ハネッコ","ポポッコ","ワタッコ","エイパム","ヒマナッツ","キマワリ","ヤンヤンマ","ウパー","ヌオー","エーフィ","ブラッキー","ヤミカラス","ヤドキング","ムウマ","アンノーン","ソーナンス","キリンリキ","クヌギダマ","フォレトス","ノコッチ","グライガー","ハガネール","ブルー","グランブル","ハリーセン","ハッサム","ツボツボ","ヘラクロス","ニューラ","ヒメグマ","リングマ","マグマッグ","マグカルゴ","ウリムー","イノムー","サニーゴ","テッポウオ","オクタン","デリバード","マンタイン","エアームド","デルビル","ヘルガー","キングドラ","ゴマゾウ","ドンファン","ポリゴン2","オドシシ","ドーブル","バルキー","カポエラー","ムチュール","エレキッド","ブビィ","ミルタンク","ハピナス","ライコウ","エンテイ","スイクン","ヨーギラス","サナギラス","バンギラス","ルギア","ホウオウ","セレビィ","キモリ","ジュプトル","ジュカイン","アチャモ","ワカシャモ","バシャーモ","ミズゴロウ","ヌマクロー","ラグラージ","ポチエナ","グラエナ","ジグザグマ","マッスグマ","ケムッソ","カラサリス","アゲハント","マユルド","ドクケイル","ハスボー","ハスブレロ","ルンパッパ","タネボー","コノハナ","ダーテング","スバメ","オオスバメ","キャモメ","ペリッパー","ラルトス","キルリア","サーナイト","アメタマ","アメモース","キノココ","キノガッサ","ナマケロ","ヤルキモノ","ケッキング","ツチニン","テッカニン","ヌケニン","ゴニョニョ","ドゴーム","バクオング","マクノシタ","ハリテヤマ","ルリリ","ノズパス","エネコ","エネコロロ","ヤミラミ","クチート","ココドラ","コドラ","ボスゴドラ","アサナン","チャーレム","ラクライ","ライボルト","プラスル","マイナン","バルビート","イルミーゼ","ロゼリア","ゴクリン","マルノーム","キバニア","サメハダー","ホエルコ","ホエルオー","ドンメル","バクーダ","コータス","バネブー","ブーピッグ","パッチール","ナックラー","ビブラーバ","フライゴン","サボネア","ノクタス","チルット","チルタリス","ザングース","ハブネーク","ルナトーン","ソルロック","ドジョッチ","ナマズン","ヘイガニ","シザリガー","ヤジロン","ネンドール","リリーラ","ユレイドル","アノプス","アーマルド","ヒンバス","ミロカロス","ポワルン","カクレオン","カゲボウズ","ジュペッタ","ヨマワル","サマヨール","トロピウス","チリーン","アブソル","ソーナノ","ユキワラシ","オニゴーリ","タマザラシ","トドグラー","トドゼルガ","パールル","ハンテール","サクラビス","ジーランス","ラブカス","タツベイ","コモルー","ボーマンダ","ダンバル","メタング","メタグロス","レジロック","レジアイス","レジスチル","ラティアス","ラティオス","カイオーガ","グラードン","レックウザ","ジラーチ","デオキシス"],[45,60,80,39,58,78,44,59,79,45,50,60,40,45,65,40,63,83,30,55,40,65,35,60,35,60,50,75,55,70,90,46,61,81,70,95,38,73,115,140,40,75,45,60,75,35,60,60,70,10,35,40,65,50,80,40,65,55,90,40,65,90,25,40,55,70,80,90,50,65,80,40,80,40,55,80,50,65,90,95,25,50,52,35,60,65,90,80,105,30,50,30,45,60,35,60,85,30,55,40,60,60,95,50,60,50,50,90,40,65,80,105,250,65,105,30,55,45,80,30,60,40,70,65,65,65,65,75,20,95,130,48,55,130,65,65,65,35,70,30,60,80,160,90,90,90,41,61,91,106,100,45,60,80,39,58,78,50,65,85,35,85,60,100,40,55,40,70,85,75,125,20,50,90,35,55,40,65,55,70,90,75,70,100,70,90,35,55,75,55,30,75,65,55,95,65,95,60,95,60,48,190,70,50,75,100,65,75,60,90,65,70,20,80,55,60,90,40,50,50,100,55,35,75,45,65,65,45,75,75,90,90,85,73,55,35,50,45,45,45,95,255,90,115,100,50,70,100,106,106,100,40,50,70,45,60,80,50,70,100,35,70,38,78,45,50,60,50,60,40,60,80,40,70,90,40,60,40,60,28,38,68,40,70,60,60,60,80,150,31,61,1,64,84,104,72,144,50,30,50,70,50,50,50,60,70,30,60,40,70,60,60,65,65,50,70,100,45,70,130,170,60,70,70,60,80,60,45,50,80,50,70,45,75,73,73,70,70,50,110,43,63,40,60,66,86,45,75,20,95,70,60,44,64,20,40,99,65,65,95,50,80,70,90,110,35,55,55,100,43,45,65,95,40,60,80,80,80,80,80,80,100,100,105,100,50],[49,62,82,52,64,84,48,63,83,30,20,45,35,25,80,45,60,80,56,81,60,90,60,85,55,90,75,100,47,62,82,57,72,92,45,70,41,76,45,70,45,80,50,65,80,70,95,55,65,55,80,45,70,52,82,80,105,70,110,50,65,85,20,35,50,80,100,130,75,90,105,40,70,80,95,110,85,100,65,75,35,60,65,85,110,45,70,80,105,65,95,35,50,65,45,48,73,105,130,30,50,40,95,50,80,120,105,55,65,90,85,130,5,55,95,40,65,67,92,45,75,45,110,50,83,95,125,100,10,125,85,48,55,65,65,130,60,40,60,80,115,105,110,85,90,100,64,84,134,110,100,49,62,82,52,64,84,65,80,105,46,76,30,50,20,35,60,90,90,38,58,40,25,30,20,40,50,75,40,55,75,80,20,50,100,75,35,45,55,70,30,75,65,45,85,65,65,85,75,60,72,33,80,65,90,70,75,85,80,120,95,130,10,125,95,80,130,40,50,50,100,55,65,105,55,40,80,60,90,95,60,120,80,95,20,35,95,30,63,75,80,10,85,115,75,64,84,134,90,130,100,45,65,85,60,85,120,70,85,110,55,90,30,70,45,35,70,35,50,30,50,70,40,70,100,55,85,30,50,25,35,65,30,60,40,130,60,80,160,45,90,90,51,71,91,60,120,20,45,45,65,75,85,70,90,110,40,60,45,75,50,40,73,47,60,43,73,90,120,70,90,60,100,85,25,45,60,100,70,100,85,115,40,70,115,100,55,95,48,78,80,120,40,70,41,81,95,125,15,60,70,90,75,115,40,70,68,50,130,23,50,80,40,60,80,64,104,84,90,30,75,95,135,55,75,135,100,50,75,80,90,100,150,150,100,95],[49,63,83,43,58,78,65,80,100,35,55,50,30,50,40,40,55,75,35,60,30,65,44,69,30,55,85,110,52,67,87,40,57,77,48,73,40,75,20,45,35,70,55,70,85,55,80,50,60,25,50,35,60,48,78,35,60,45,80,40,65,95,15,30,45,50,70,80,35,50,65,35,65,100,115,130,55,70,65,110,70,95,55,45,70,55,80,50,75,100,180,30,45,60,160,45,70,90,115,50,70,80,85,95,110,53,79,75,95,120,95,120,5,115,80,70,95,60,65,55,85,65,80,35,57,57,100,95,55,79,80,48,50,60,60,60,70,100,125,90,105,65,65,100,85,90,45,65,95,90,100,65,80,100,43,58,78,64,80,100,34,64,30,50,30,50,40,70,80,38,58,15,28,15,65,85,45,70,40,55,75,85,50,80,115,75,40,50,70,55,30,55,45,45,85,60,110,42,80,60,48,58,65,90,140,70,105,200,50,75,75,100,230,75,55,50,75,40,120,40,80,85,35,75,45,70,140,30,50,95,60,120,90,62,35,35,95,15,37,37,105,10,75,85,115,50,70,110,130,90,100,35,45,65,40,60,70,50,70,90,35,70,41,61,35,55,50,55,70,30,50,70,50,40,60,30,60,30,100,25,35,65,32,62,60,80,60,80,100,90,45,45,23,43,63,30,60,40,135,45,65,75,85,100,140,180,55,75,40,60,40,50,55,55,45,53,83,20,40,35,45,40,70,140,35,65,60,45,50,80,40,60,60,90,60,60,65,85,43,73,65,85,55,105,77,97,50,100,20,79,70,70,35,65,90,130,83,70,60,48,50,80,50,70,90,85,105,105,130,55,60,100,80,80,100,130,200,100,150,90,80,90,140,90,100,90],[65,80,100,60,80,109,50,65,85,20,25,80,20,25,45,35,50,70,25,50,31,61,40,65,50,90,20,45,40,55,75,40,55,85,60,85,50,81,45,75,30,65,75,85,100,45,60,40,90,35,50,40,65,65,95,35,60,70,100,40,50,70,105,120,135,35,50,65,70,85,100,50,80,30,45,55,65,80,40,100,95,120,58,35,60,45,70,40,65,45,85,100,115,130,30,43,73,25,50,55,80,60,125,40,50,35,35,60,60,85,30,45,35,100,40,70,95,35,65,70,100,100,55,115,95,100,55,40,15,60,85,48,45,110,110,95,85,90,115,55,65,60,65,95,125,125,50,70,100,154,100,49,63,83,60,80,109,44,59,79,35,45,36,76,40,55,40,60,70,56,76,35,45,40,40,80,70,95,65,80,115,90,20,50,30,90,35,45,55,40,30,105,75,25,65,130,60,85,100,85,72,33,90,35,60,65,35,55,40,60,55,55,10,40,35,50,75,70,80,30,60,65,65,105,65,80,40,80,110,95,40,60,105,85,20,35,35,85,65,70,40,75,115,90,90,45,65,95,90,110,100,65,85,105,70,85,110,50,60,85,30,60,30,50,20,25,90,25,50,40,60,90,30,60,90,30,50,55,85,45,65,125,50,80,40,60,35,55,95,30,50,30,51,71,91,20,40,20,45,35,55,65,55,40,50,60,40,60,65,105,85,75,47,73,100,43,73,65,95,70,90,65,105,85,70,90,60,45,50,80,85,115,40,70,60,100,95,55,46,76,50,90,40,70,61,81,40,70,10,100,70,60,63,83,30,60,72,95,75,23,50,80,55,75,95,74,94,114,45,40,40,60,110,35,55,95,50,100,75,110,130,150,100,150,100,95],[65,80,100,50,65,85,64,80,105,20,25,80,20,25,80,35,50,70,35,70,31,61,54,79,40,80,30,55,40,55,85,40,55,75,65,90,65,100,25,50,40,75,65,75,90,55,80,55,75,45,70,40,65,50,80,45,70,50,80,40,50,90,55,70,85,35,60,85,30,45,60,100,120,30,45,65,65,80,40,80,55,70,62,35,60,70,95,50,100,25,45,35,55,75,45,90,115,25,50,55,80,45,65,50,80,110,110,75,45,70,30,45,105,40,80,25,45,50,80,55,85,120,80,95,85,85,70,70,20,100,95,48,65,95,95,110,75,55,70,45,70,75,110,125,90,85,50,70,100,90,100,65,80,100,50,65,85,48,63,83,45,55,56,96,80,110,40,60,80,56,76,35,55,20,65,105,45,70,45,60,90,100,50,80,65,100,55,65,85,55,30,85,45,25,65,95,130,42,110,85,48,58,65,35,60,65,65,65,40,60,55,80,230,95,75,50,75,40,80,30,60,85,35,75,45,140,70,50,80,95,40,60,95,65,45,35,110,65,55,55,70,135,100,75,115,50,70,100,154,154,100,55,65,85,50,60,70,50,70,90,30,60,41,61,30,25,50,25,90,50,70,100,30,40,60,30,50,30,70,35,55,115,52,82,60,60,35,55,65,30,50,30,23,43,63,30,60,40,90,35,55,65,55,40,50,60,55,75,40,60,75,85,75,75,80,53,83,20,40,35,45,45,75,70,80,110,60,45,50,80,40,60,75,105,60,60,85,65,41,71,35,55,70,120,87,107,50,80,55,125,70,120,33,63,90,130,87,80,60,48,50,80,50,70,90,55,75,75,65,65,30,50,80,60,80,90,100,200,150,130,110,140,90,90,100,90],[45,60,80,65,80,100,43,58,78,45,30,70,50,35,75,56,71,91,72,97,70,100,55,80,90,100,40,65,41,56,76,50,65,85,35,60,65,100,20,45,55,90,30,40,50,25,30,45,90,95,120,90,115,55,85,70,95,60,95,90,90,70,90,105,120,35,45,55,40,55,70,70,100,20,35,45,90,105,15,30,45,70,60,75,100,45,70,25,50,40,70,80,95,110,70,42,67,50,75,100,140,40,55,35,45,87,76,30,35,60,25,40,50,60,90,60,85,63,68,85,115,90,105,95,105,93,85,110,80,81,60,48,55,65,130,65,40,35,55,55,80,130,30,85,100,90,50,70,80,130,100,45,60,80,65,80,100,43,58,78,20,90,50,70,55,85,30,40,130,67,67,60,15,15,20,40,70,95,35,45,55,50,40,50,30,70,50,80,110,85,30,30,95,15,35,110,65,91,30,85,48,33,85,15,40,45,85,30,30,45,85,65,5,85,115,40,55,20,30,50,50,35,65,45,75,70,70,65,95,85,40,50,60,85,75,35,70,65,95,83,100,55,115,100,85,41,51,61,110,90,100,70,95,120,45,55,80,40,50,60,35,70,60,100,20,15,65,15,65,30,50,70,30,60,80,85,125,85,65,40,50,80,65,60,35,70,30,90,100,40,160,40,28,48,68,25,50,20,30,50,70,50,50,30,40,50,60,80,65,105,95,95,85,85,65,40,55,65,95,60,60,35,40,20,60,80,60,10,70,100,35,55,50,80,90,65,70,70,60,60,35,55,55,75,23,43,75,45,80,81,70,40,45,65,25,25,51,65,75,23,50,80,25,45,65,32,52,52,55,97,50,50,100,30,50,70,50,50,50,110,110,90,90,95,100,180],[5120,5120,5120,5120,5120,5120,5120,5120,5120,3840,3840,3840,3840,3840,3840,3840,3840,3840,3840,3840,3840,3840,5120,5120,2560,2560,5120,5120,5120,5120,5120,5120,5120,5120,2560,2560,5120,5120,2560,2560,3840,3840,5120,5120,5120,5120,5120,5120,5120,5120,5120,5120,5120,5120,5120,5120,5120,5120,5120,5120,5120,5120,5120,5120,5120,5120,5120,5120,5120,5120,5120,5120,5120,3840,3840,3840,5120,5120,5120,5120,5120,5120,5120,5120,5120,5120,5120,5120,5120,5120,5120,5120,5120,5120,6400,5120,5120,5120,5120,5120,5120,5120,5120,5120,5120,6400,6400,5120,5120,5120,5120,5120,10240,5120,5120,5120,5120,5120,5120,5120,5120,6400,6400,6400,6400,6400,6400,5120,1280,1280,10240,5120,8960,8960,8960,8960,5120,7680,7680,7680,7680,8960,10240,20480,20480,20480,10240,10240,10240,30720,30720,5120,5120,5120,5120,5120,5120,5120,5120,5120,3840,3840,3840,3840,3840,3840,3840,3840,3840,5120,5120,2560,2560,2560,2560,2560,5120,5120,5120,5120,5120,5120,2560,2560,5120,5120,5120,5120,5120,5120,5120,5120,5120,5120,5120,8960,8960,5120,5120,6400,10240,5120,5120,5120,5120,5120,5120,6400,5120,5120,5120,6400,5120,6400,5120,5120,5120,5120,5120,5120,5120,5120,5120,5120,5120,6400,6400,5120,5120,5120,5120,5120,5120,5120,5120,6400,6400,6400,6400,6400,5120,10240,20480,20480,20480,10240,10240,10240,30720,30720,30720,5120,5120,5120,5120,5120,5120,5120,5120,5120,3840,3840,3840,3840,3840,3840,3840,3840,3840,3840,3840,3840,3840,3840,3840,3840,3840,5120,5120,5120,5120,5120,3840,3840,3840,3840,3840,3840,3840,3840,3840,3840,5120,5120,5120,5120,5120,2560,5120,3840,3840,6400,5120,8960,8960,8960,5120,5120,5120,5120,5120,5120,3840,3840,5120,5120,5120,5120,5120,10240,10240,5120,5120,5120,5120,5120,3840,5120,5120,5120,5120,5120,5120,5120,5120,5120,6400,6400,5120,5120,3840,3840,5120,5120,7680,7680,7680,7680,5120,5120,6400,5120,6400,6400,6400,6400,6400,6400,6400,5120,5120,5120,5120,5120,5120,5120,5120,5120,10240,5120,10240,10240,10240,10240,10240,10240,20480,20480,20480,30720,30720,30720,30720,30720,30720,30720],["かいじゅう / しょくぶつ","かいじゅう / しょくぶつ","かいじゅう / しょくぶつ","かいじゅう / ドラゴン","かいじゅう / ドラゴン","かいじゅう / ドラゴン","かいじゅう / すいちゅう1","かいじゅう / すいちゅう1","かいじゅう / すいちゅう1","むし","むし","むし","むし","むし","むし","ひこう","ひこう","ひこう","りくじょう","りくじょう","ひこう","ひこう","りくじょう / ドラゴン","りくじょう / ドラゴン","りくじょう / ようせい","りくじょう / ようせい","りくじょう","りくじょう","かいじゅう / りくじょう","みはっけん","みはっけん","かいじゅう / りくじょう","かいじゅう / りくじょう","かいじゅう / りくじょう","ようせい","ようせい","りくじょう","りくじょう","ようせい","ようせい","ひこう","ひこう","しょくぶつ","しょくぶつ","しょくぶつ","むし / しょくぶつ","むし / しょくぶつ","むし","むし","りくじょう","りくじょう","りくじょう","りくじょう","すいちゅう1 / りくじょう","すいちゅう1 / りくじょう","りくじょう","りくじょう","りくじょう","りくじょう","すいちゅう1","すいちゅう1","すいちゅう1","ひとがた","ひとがた","ひとがた","ひとがた","ひとがた","ひとがた","しょくぶつ","しょくぶつ","しょくぶつ","すいちゅう3","すいちゅう3","こうぶつ","こうぶつ","こうぶつ","りくじょう","りくじょう","かいじゅう / すいちゅう1","かいじゅう / すいちゅう1","せいべつふめい","せいべつふめい","ひこう / りくじょう","ひこう","ひこう","すいちゅう1 / りくじょう","すいちゅう1 / りくじょう","ふていけい","ふていけい","すいちゅう3","すいちゅう3","ふていけい","ふていけい","ふていけい","こうぶつ","ひとがた","ひとがた","すいちゅう3","すいちゅう3","せいべつふめい","せいべつふめい","しょくぶつ","しょくぶつ","かいじゅう","かいじゅう","ひとがた","ひとがた","かいじゅう","ふていけい","ふていけい","かいじゅう / りくじょう","かいじゅう / りくじょう","ようせい","しょくぶつ","かいじゅう","すいちゅう1 / ドラゴン","すいちゅう1 / ドラゴン","すいちゅう2","すいちゅう2","せいべつふめい","せいべつふめい","ひとがた","むし","ひとがた","ひとがた","ひとがた","むし","りくじょう","すいちゅう2 / ドラゴン","すいちゅう2 / ドラゴン","かいじゅう / すいちゅう1","メタモン","りくじょう","りくじょう","りくじょう","りくじょう","せいべつふめい","すいちゅう1 / すいちゅう3","すいちゅう1 / すいちゅう3","すいちゅう1 / すいちゅう3","すいちゅう1 / すいちゅう3","ひこう","かいじゅう","みはっけん","みはっけん","みはっけん","すいちゅう1 / ドラゴン","すいちゅう1 / ドラゴン","すいちゅう1 / ドラゴン","みはっけん","みはっけん","かいじゅう / しょくぶつ","かいじゅう / しょくぶつ","かいじゅう / しょくぶつ","りくじょう","りくじょう","りくじょう","かいじゅう / すいちゅう1","かいじゅう / すいちゅう1","かいじゅう / すいちゅう1","りくじょう","りくじょう","ひこう","ひこう","むし","むし","むし","むし","ひこう","すいちゅう2","すいちゅう2","みはっけん","みはっけん","みはっけん","みはっけん","ひこう / ようせい","ひこう","ひこう","かいじゅう / りくじょう","かいじゅう / りくじょう","かいじゅう / りくじょう","しょくぶつ","すいちゅう1 / ようせい","すいちゅう1 / ようせい","こうぶつ","すいちゅう1","ようせい / しょくぶつ","ようせい / しょくぶつ","ようせい / しょくぶつ","りくじょう","しょくぶつ","しょくぶつ","むし","すいちゅう1 / りくじょう","すいちゅう1 / りくじょう","りくじょう","りくじょう","ひこう","かいじゅう / すいちゅう1","ふていけい","みはっけん","ふていけい","りくじょう","むし","むし","りくじょう","むし","こうぶつ","りくじょう / ようせい","りくじょう / ようせい","すいちゅう2","むし","むし","むし","りくじょう","りくじょう","りくじょう","ふていけい","ふていけい","りくじょう","りくじょう","すいちゅう1 / すいちゅう3","すいちゅう1 / すいちゅう2","すいちゅう1 / すいちゅう2","すいちゅう1 / りくじょう","すいちゅう1","ひこう","りくじょう","りくじょう","すいちゅう1 / ドラゴン","りくじょう","りくじょう","せいべつふめい","りくじょう","りくじょう","みはっけん","ひとがた","みはっけん","みはっけん","みはっけん","りくじょう","ようせい","みはっけん","みはっけん","みはっけん","かいじゅう","かいじゅう","かいじゅう","みはっけん","みはっけん","みはっけん","かいじゅう / ドラゴン","かいじゅう / ドラゴン","かいじゅう / ドラゴン","りくじょう","りくじょう","りくじょう","かいじゅう / すいちゅう1","かいじゅう / すいちゅう1","かいじゅう / すいちゅう1","りくじょう","りくじょう","りくじょう","りくじょう","むし","むし","むし","むし","むし","すいちゅう1 / しょくぶつ","すいちゅう1 / しょくぶつ","すいちゅう1 / しょくぶつ","りくじょう / しょくぶつ","りくじょう / しょくぶつ","りくじょう / しょくぶつ","ひこう","ひこう","すいちゅう1 / ひこう","すいちゅう1 / ひこう","ふていけい","ふていけい","ふていけい","すいちゅう1 / むし","すいちゅう1 / むし","ようせい / しょくぶつ","ようせい / しょくぶつ","りくじょう","りくじょう","りくじょう","むし","むし","せいべつふめい","かいじゅう / りくじょう","かいじゅう / りくじょう","かいじゅう / りくじょう","ひとがた","ひとがた","みはっけん","こうぶつ","りくじょう / ようせい","りくじょう / ようせい","ひとがた","りくじょう / ようせい","かいじゅう","かいじゅう","かいじゅう","ひとがた","ひとがた","りくじょう","りくじょう","ようせい","ようせい","むし / ひとがた","むし / ひとがた","ようせい / しょくぶつ","ふていけい","ふていけい","すいちゅう2","すいちゅう2","りくじょう / すいちゅう2","りくじょう / すいちゅう2","りくじょう","りくじょう","りくじょう","りくじょう","りくじょう","りくじょう / ひとがた","むし","むし","むし","しょくぶつ / ひとがた","しょくぶつ / ひとがた","ひこう / ドラゴン","ひこう / ドラゴン","りくじょう","りくじょう / ドラゴン","せいべつふめい","せいべつふめい","すいちゅう2","すいちゅう2","すいちゅう1 / すいちゅう3","すいちゅう1 / すいちゅう3","せいべつふめい","せいべつふめい","すいちゅう3","すいちゅう3","すいちゅう3","すいちゅう3","すいちゅう1 / ドラゴン","すいちゅう1 / ドラゴン","ようせい / ふていけい","りくじょう","ふていけい","ふていけい","ふていけい","ふていけい","かいじゅう / しょくぶつ","ふていけい","りくじょう","みはっけん","ようせい / こうぶつ","ようせい / こうぶつ","すいちゅう1 / りくじょう","すいちゅう1 / りくじょう","すいちゅう1 / りくじょう","すいちゅう1","すいちゅう1","すいちゅう1","すいちゅう1 / すいちゅう2","すいちゅう2","ドラゴン","ドラゴン","ドラゴン","せいべつふめい","せいべつふめい","せいべつふめい","みはっけん","みはっけん","みはっけん","みはっけん","みはっけん","みはっけん","みはっけん","みはっけん","みはっけん","みはっけん"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>name<\/th>\n      <th>HP<\/th>\n      <th>こうげき<\/th>\n      <th>ぼうぎょ<\/th>\n      <th>とくこう<\/th>\n      <th>とくぼう<\/th>\n      <th>すばやさ<\/th>\n      <th>タマゴ歩数<\/th>\n      <th>タマゴグループ<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[2,3,4,5,6,7,8]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="データを可視化する" class="section level2">
<h2>データを可視化する</h2>
<p>とりあえず、能力値の分布を観察してみました。</p>
<pre class="r"><code>ggplot(pokemon_df) +
  geom_density(aes(HP), colour = &quot;red&quot;, fill = &quot;red&quot;, alpha = 0.1) +
  geom_density(aes(こうげき), colour = &quot;yellow&quot;, fill = &quot;yellow&quot;, alpha = 0.1) +
  geom_density(aes(ぼうぎょ), colour = &quot;blue&quot;, fill = &quot;blue&quot;, alpha = 0.1) +
  geom_density(aes(とくこう), colour = &quot;grey&quot;, fill = &quot;grey&quot;, alpha = 0.1) +
  scale_x_continuous(&quot;各セクションの能力値&quot;) +
  scale_y_continuous(&quot;確率密度&quot;) +
  labs(title = &quot;各セクションの能力の分布&quot;, 
       subtitle = &quot;→ どの能力も同じような分布を持っていることが分かる&quot;) +
  theme_classic() </code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<p>###　たまごの歩数の箱ひげ図を表示させる</p>
<pre class="r"><code>ggplot(pokemon_df, aes(タマゴ歩数)) +
  geom_histogram(binwidth = 1000)</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
</div>
<div id="最後に" class="section level2">
<h2>最後に、、、</h2>
<p>いかがだったでしょうか？？</p>
<p>ポケモンのデータを集めてみましたが、属性等の情報がないと詳しくは調べれられませんね。</p>
<p>最後まで読んでいただきありがとうございました！！</p>
<p>Adios!!</p>
</div>
<div id="全コード" class="section level2">
<h2>全コード</h2>
<pre class="r"><code>library(rvest)
library(tidyverse)
library(stringr)


# ポケモン名データを取ってくる

name_all &lt;- &quot;&quot;
for (i in 1:386) {
  url_all &lt;- paste0(&quot;https://yakkun.com/data/zukan/n&quot;, i, &quot;.htm&quot;)
  data_all &lt;- read_html(url_all)
  media_all &lt;- html_nodes(data_all, &quot;#contents div:nth-child(3) table:nth-child(1) tr:nth-child(1) th&quot;) %&gt;% 
    html_text()
  name_all &lt;- c(name_all, media_all)
}

name_all &lt;- name_all[c(-1, -2)] %&gt;%
  
  
# 能力値データを取ってくる

ability_all &lt;- data.frame()
for (i in 1:386) {
  url_all &lt;- paste0(&quot;https://yakkun.com/data/zukan/n&quot;, i, &quot;.htm&quot;)
  data_all &lt;- read_html(url_all)
  media_all &lt;- html_nodes(data_all, &quot;.center tr td.left&quot;) %&gt;% 
    html_text() 
  ability_all &lt;- rbind(ability_all, media_all)
}

# col namesを設定する
url &lt;- &quot;https://yakkun.com/data/zukan/n1.htm&quot;
data &lt;- read_html(url)
media_col &lt;- html_nodes(data, &quot;.center tr .c1&quot;) %&gt;% 
  html_text()

colnames(ability_all) &lt;- media_col

# name と　abilityを融合
pokemon_df &lt;- cbind(name = name_all, ability_all)

# tidy data

pokemon_df2 &lt;- pokemon_df[ ,c(1:7, 19:20)] 


for (i in 2:7) {
  pokemon_df2[,i] &lt;- str_remove(pokemon_df[,i], pattern = &quot;\\((.*?)\\)&quot;) %&gt;% str_squish()
}

pokemon_df2[,8] &lt;- str_replace_all(pokemon_df2[,8], pattern = &quot;歩&quot;, replacement = &quot;&quot;)


pokemon_df2[,2:8] &lt;- as.double(pokemon_df2[2:8])

for (i in 2:8) {
  pokemon_df2[,i] &lt;- as.double(pokemon_df2[,i])
}

# データを保存
saveRDS(pokemon_df2, &quot;pokemon_df.RData&quot;)

# データを確認
df &lt;- readRDS(&quot;pokemon_df.RData&quot;)</code></pre>
</div>
